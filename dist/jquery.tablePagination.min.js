/*!
 * jQuery tablePagination Plugin
 * https://github.com/Reload-Lab/jquery-tablePagination
 *
 * @updated September 22, 2023
 * @version 1.0.1
 *
 * @author Domenico Gigante <domenico.gigante@reloadlab.it>
 * @copyright (c) 2023 Reload Laboratorio Multimediale <info@reloadlab.it> (https://www.reloadlab.it)
 * @license MIT
 */
!function(e){"use strict";e.fn.tablePagination=function(){var t,a,n=this,s="tpContainer",r="<ul>",i="pagination",d="<div>",o="ctrl-bar",u="<div>",l="pages-count",g="<div>",p="rows-select",c="<li>",h="page-item",f="active",P="disabled",m="<a>",w="page-link",v="page-arrow",b="page-ellipsis";if(!arguments.length||e.isPlainObject(arguments[0]))t=e.extend({},{subset:!1,currentPage:0,numRowsPage:10,maxShowedPages:10,prev:'<i class="fa fa-angle-double-left" aria-hidden="true"></i>',next:'<i class="fa fa-angle-double-right" aria-hidden="true"></i>',countPages:!0,countText:"<b>[t]</b> record trovati - pagina <b>[x]</b> di <b>[y]</b>",selectNumRowsPage:!0,selectOptions:[10,25,50,100,"Tutte"],selectTitle:"Numero di righe per pagina",useHash:!0,onPage:null,onSelect:null},arguments[0]);else if("string"==typeof arguments[0])var R=arguments[0];return"object"==typeof arguments[1]&&arguments[1]instanceof jQuery&&(a=arguments[1]),this.each((function(n,x){var C=this;if(C._init=function(){var a=e(this),n=a.attr("id"),c=e("[data-tp-target='#"+n+"']");if(!n||0==c.length)return!1;c.addClass(s),a.data("tp",e.extend({},t)).data("tpdef",t),e(u).addClass(l).appendTo(c);var h=e(d).addClass(o).appendTo(c);e(r).addClass(i).appendTo(h),e(g).addClass(p).appendTo(h),a.bind("paginate",(function(t){var a=e(this),n=a.attr("id"),s=a.data("tp"),r=e("[data-tp-target='#"+n+"']");if(!n||!s||0==r.length)return!1;s.subset?s.subset.addClass("tpHidden").slice(s.currentPage*s.numRowsPage,(s.currentPage+1)*s.numRowsPage).removeClass("tpHidden"):a.find("tbody tr").addClass("tpHidden").slice(s.currentPage*s.numRowsPage,(s.currentPage+1)*s.numRowsPage).removeClass("tpHidden");var i=r.find("."+l).hide().empty();s.countPages&&i.show().html(s.countText.replace("[t]",s.numRows).replace("[x]",s.currentPage+1).replace("[y]",s.numPages)),this._pages()})),this._load()},C._load=function(){var t=e(this),n=t.attr("id"),s=t.data("tp"),r=e("[data-tp-target='#"+n+"']");if(!n||!s||0==r.length)return!1;a&&(s.subset=a);var d=s.subset?s.subset.length:t.find("tbody tr").length;s.allRows&&(s.currentPage=0,s.numRowsPage=d);s=e.extend(s,{numPages:Math.ceil(d/s.numRowsPage),numRows:d});var o=r.find("."+i).empty();if(s.currentPage>s.numPages-1&&(s.currentPage=s.numPages-1),t.data("tp",e.extend({},s)),this._selection(),d>s.numRowsPage){var u=e(m).addClass(w).attr("href","#").html(s.prev);e(c).addClass(h+" "+v+" prev").append(u).on("click.tp",(function(a){if(a.preventDefault(),!e(this).hasClass(P)){var r={},i=o.find("."+h+"."+f).attr("data-tp-num"),d=parseInt(i)-2;d>=0&&(s.currentPage=d,s.useHash&&(r[n]=s.currentPage+","+s.numRowsPage,e.bbq.pushState(r)),t.data("tp",e.extend({},s))),t.trigger("paginate"),"function"==typeof s.onPage&&s.onPage(t,i,d+1)}})).appendTo(o);for(var l=0;l<s.numPages;l++){u=e(m).addClass(w).attr("href","#").text(l+1);e(c).addClass(h).attr("data-tp-num",l+1).append(u).on("click.tp",(function(a){if(a.preventDefault(),!e(this).hasClass(P)){var r={},i=o.find("."+h+"."+f).attr("data-tp-num"),d=parseInt(e(this).attr("data-tp-num"))-1;d>=0&&(s.currentPage=d,s.useHash&&(r[n]=s.currentPage+","+s.numRowsPage,e.bbq.pushState(r)),t.data("tp",e.extend({},s))),t.trigger("paginate"),"function"==typeof s.onPage&&s.onPage(t,i,d+1)}})).appendTo(o)}u=e(m).addClass(w).attr("href","#").html(s.next);e(c).addClass(h+" "+v+" next").append(u).on("click.tp",(function(a){if(a.preventDefault(),!e(this).hasClass(P)){var r={},i=o.find("."+h+"."+f).attr("data-tp-num"),d=parseInt(i);d<s.numPages&&(s.currentPage=r[n]=d,s.useHash&&(r[n]=s.currentPage+","+s.numRowsPage,e.bbq.pushState(r)),t.data("tp",e.extend({},s))),t.trigger("paginate"),"function"==typeof s.onPage&&s.onPage(t,i,d+1)}})).appendTo(o);u=e(m).addClass(w).attr("href","#").text("...");e(c).addClass(h+" "+b+" prev "+P).append(u).insertAfter(o.find("."+v+".prev"));u=e(m).addClass(w).attr("href","#").text("...");e(c).addClass(h+" "+b+" next "+P).append(u).insertBefore(o.find("."+v+".next"))}t.trigger("paginate")},C._pages=function(){var t=e(this),a=t.attr("id"),n=t.data("tp"),s=e("[data-tp-target='#"+a+"']");if(!a||!n||0==s.length)return!1;s.each((function(t,a){if(s=e(this),e(this).find("."+h+"[data-tp-num]").removeClass(f).siblings("."+h+"[data-tp-num='"+(n.currentPage+1)+"']").addClass(f),e(this).find("."+b).hide(),n.maxShowedPages>0&&n.maxShowedPages<n.numPages){var r=n.maxShowedPages/2,i=e(this).find("."+h+"[data-tp-num]").hide();n.currentPage-r<0?i.slice(0,n.maxShowedPages).show():n.currentPage+r>=n.numPages?i.slice(n.numPages-n.maxShowedPages,n.numPages).show():n.currentPage-r>=0&&n.currentPage+r<n.numPages&&i.slice(n.currentPage-Math.floor(r),n.currentPage+Math.ceil(r)).show(),e(this).find("."+h+"[data-tp-num='1']").is(":hidden")&&e(this).find("."+b+".prev").show(),e(this).find("."+h+"[data-tp-num='"+n.numPages+"']").is(":hidden")&&e(this).find("."+b+".next").show()}e(this).find("."+v).removeClass(P),0==n.currentPage?e(this).find("."+v+".prev").addClass(P):n.currentPage==n.numPages-1&&e(this).find("."+v+".next").addClass(P)}))},this._selection=function(){var t=e(this),a=t.attr("id"),n=t.data("tp"),s=e("[data-tp-target='#"+a+"']"),r=new RegExp("^[0-9]+$");if(!a||!n||0==s.length)return!1;var i=s.find("."+p).empty().hide();if(n.selectNumRowsPage){var d=e("<select>").addClass("form-control").attr("title",n.selectTitle).on("change.tp",(function(s){s.preventDefault();var r,i={};if("all"==e(this).val())n.currentPage=0,n.numRowsPage=n.subset?n.subset.length:t.find("tbody tr").length,n.allRows=!0,n.useHash&&(i[a]=n.currentPage+",all",e.bbq.pushState(i));else if((r=parseInt(e(this).val()))>0){var d=n.currentPage*n.numRowsPage+1,o=Math.ceil(d/r)-1;n.numRowsPage=r,n.currentPage=o,n.allRows=!1,n.useHash&&(i[a]=n.currentPage+","+n.numRowsPage,e.bbq.pushState(i))}t.data("tp",e.extend({},n)),C._load(),"function"==typeof n.onSelect&&n.onSelect(t,e(this).val())})).appendTo(i);e('<option value=""></option>').appendTo(d);for(var o=0;o<n.selectOptions.length;o++)!1===r.test(n.selectOptions[o])?e('<option value="all"'+(n.allRows?" selected":"")+">"+n.selectOptions[o]+"</option>").appendTo(d):e('<option value="'+n.selectOptions[o]+'"'+(n.numRowsPage==n.selectOptions[o]?" selected":"")+">"+n.selectOptions[o]+"</option>").appendTo(d)}i.find("select").length&&(n.allRows||n.selectNumRowsPage)&&s.find("."+p).show()},t)this._init();else if(R)switch(R){case"reload":this._load()}})),e(window).bind("hashchange.tp",(function(t){n.each((function(){var t=e(this),a=t.attr("id"),n=t.data("tp");if(!a||!n)return!1;var s=e.bbq.getState(a)||"";if(n.useHash&&""!=s&&-1!=s.indexOf(",")){var r=s.split(",",2);if("all"==r[1])n.currentPage=0,n.numRowsPage=n.subset?n.subset.length:t.find("tbody tr").length,n.allRows=!0;else{if(n.currentPage==r[0]&&n.numRowsPage==r[1])return;n.currentPage=parseInt(r[0]),n.numRowsPage=parseInt(r[1]),n.allRows=!1}}else{var i=t.data("tpdef");n.currentPage=i.currentPage||0,n.numRowsPage=i.numRowsPage||10,n.allRows=!1}t.data("tp",e.extend({},n)),this._load()}))})),e(window).trigger("hashchange.tp"),n}}(jQuery);