!function(t){t.fn.tablePagination=function(){var e,a,n=this,s="<ul>",r="pagination",i="<div>",d="ctrl-bar",u="<div>",g="pages-count",p="<div>",o="rows-select",c="<li>",l="page-item",h="active",f="disabled",P="<a>",m="page-link",v="page-arrow",w="page-ellipsis";if(!arguments.length||t.isPlainObject(arguments[0]))e=t.extend({},{subset:!1,currentPage:0,numRowsPage:10,maxShowedPages:10,prev:"&lt;",next:"&gt;",countText:"<b>[t]</b> record trovati - pagina <b>[x]</b> di <b>[y]</b>",selectNumRowsPage:!0,selectOptions:[10,25,50,100]},arguments[0]);else if("string"==typeof arguments[0])var b=arguments[0];return"object"==typeof arguments[1]&&arguments[1]instanceof jQuery&&(a=arguments[1]),this.each((function(n,x){var C=this;if(C._init=function(){var a=t(this),n=a.attr("id"),c=t("[data-tp-target='#"+n+"']");if(!n||0==c.length)return!1;a.data("tp",t.extend({},e)).data("tpdef",e),t(u).addClass(g).appendTo(c),$ctrl=t(i).addClass(d).appendTo(c),t(s).addClass(r).appendTo($ctrl),t(p).addClass(o).appendTo($ctrl),a.bind("paginate",(function(){var e=t(this),a=e.attr("id"),n=e.data("tp"),s=t("[data-tp-target='#"+a+"']");if(!a||!n||0==s.length)return!1;n.subset?n.subset.hide().slice(n.currentPage*n.numRowsPage,(n.currentPage+1)*n.numRowsPage).show():e.find("tbody tr").hide().slice(n.currentPage*n.numRowsPage,(n.currentPage+1)*n.numRowsPage).show(),s.find("."+g).html(n.countText.replace("[t]",n.numRows).replace("[x]",n.currentPage+1).replace("[y]",n.numPages)),this._pages()})),this._load()},C._load=function(){var e=t(this),n=e.attr("id"),s=e.data("tp"),i=t("[data-tp-target='#"+n+"']");if(!n||!s||0==i.length)return!1;if(a&&(s.subset=a),s.subset)var d=s.subset.length;else d=e.find("tbody tr").length;s=t.extend(s,{numPages:Math.ceil(d/s.numRowsPage),numRows:d});var u=i.find("."+r).empty();if(s.currentPage>s.numPages-1&&(s.currentPage=s.numPages-1),e.data("tp",t.extend({},s)),this._selection(),d>s.numRowsPage){i.find("."+o).show();var g=t(P).addClass(m).attr("href","#").html(s.prev);t(c).addClass(l+" "+v+" prev").append(g).on("click.tp",(function(a){if(a.preventDefault(),!t(this).hasClass(f)){var r,i={},d=u.find("."+l+"."+h);(r=parseInt(d.attr("data-tp-num"))-2)>=0&&(s.currentPage=r,e.data("tp",t.extend({},s)),i[n]=s.currentPage+","+s.numRowsPage,t.bbq.pushState(i)),e.trigger("paginate")}})).appendTo(u);for(var p=0;p<s.numPages;p++){g=t(P).addClass(m).attr("href","#").text(p+1);t(c).addClass(l).attr("data-tp-num",p+1).append(g).on("click.tp",(function(a){if(a.preventDefault(),!t(this).hasClass(f)){var r,i={};(r=parseInt(t(this).attr("data-tp-num"))-1)>=0&&(s.currentPage=i[n]=r,e.data("tp",t.extend({},s)),i[n]=s.currentPage+","+s.numRowsPage,t.bbq.pushState(i)),e.trigger("paginate")}})).appendTo(u)}g=t(P).addClass(m).attr("href","#").html(s.next);t(c).addClass(l+" "+v+" next").append(g).on("click.tp",(function(a){if(a.preventDefault(),!t(this).hasClass(f)){var r,i={},d=u.find("."+l+"."+h);(r=parseInt(d.attr("data-tp-num")))<s.numPages&&(s.currentPage=i[n]=r,e.data("tp",t.extend({},s)),i[n]=s.currentPage+","+s.numRowsPage,t.bbq.pushState(i))}e.trigger("paginate")})).appendTo(u);g=t(P).addClass(m).attr("href","#").text("...");t(c).addClass(l+" "+w+" prev "+f).append(g).insertAfter(u.find("."+v+".prev"));g=t(P).addClass(m).attr("href","#").text("...");t(c).addClass(l+" "+w+" next "+f).append(g).insertBefore(u.find("."+v+".next"))}e.trigger("paginate")},C._pages=function(){var e=t(this),a=e.attr("id"),n=e.data("tp"),s=t("[data-tp-target='#"+a+"']");if(!a||!n||0==s.length)return!1;s.each((function(e,a){if(s=t(this),t(this).find("."+l+"[data-tp-num]").removeClass(h).siblings("."+l+"[data-tp-num='"+(n.currentPage+1)+"']").addClass(h),t(this).find("."+w).hide(),n.maxShowedPages>0&&n.maxShowedPages<n.numPages){var r=n.maxShowedPages/2,i=t(this).find("."+l+"[data-tp-num]").hide();n.currentPage-r<0?i.slice(0,n.maxShowedPages).show():n.currentPage+r>=n.numPages?i.slice(n.numPages-n.maxShowedPages,n.numPages).show():n.currentPage-r>=0&&n.currentPage+r<n.numPages&&i.slice(n.currentPage-Math.floor(r),n.currentPage+Math.ceil(r)).show(),t(this).find("."+l+"[data-tp-num='1']").is(":hidden")&&t(this).find("."+w+".prev").show(),t(this).find("."+l+"[data-tp-num='"+n.numPages+"']").is(":hidden")&&t(this).find("."+w+".next").show()}t(this).find("."+v).removeClass(f),0==n.currentPage?t(this).find("."+v+".prev").addClass(f):n.currentPage==n.numPages-1&&t(this).find("."+v+".next").addClass(f)}))},this._selection=function(){var e=t(this),a=e.attr("id"),n=e.data("tp"),s=t("[data-tp-target='#"+a+"']");if(!a||!n||0==s.length)return!1;if(n.selectNumRowsPage){var r=s.find("."+o).empty().hide(),i=t("<select>").addClass("form-control").attr("title","Numero di record per pagina").on("change.tp",(function(s){var r,i={};if((r=parseInt(t(this).val()))>0){var d=n.currentPage*n.numRowsPage+1,u=Math.ceil(d/r)-1;n.numRowsPage=r,n.currentPage=u,e.data("tp",t.extend({},n)),i[a]=n.currentPage+","+n.numRowsPage,t.bbq.pushState(i),C._load()}return!1})).appendTo(r);t('<option value=""></option>').appendTo(i);for(var d=0;d<n.selectOptions.length;d++)t('<option value="'+n.selectOptions[d]+'"'+(n.numRowsPage==n.selectOptions[d]?" selected":"")+">"+n.selectOptions[d]+"</option>").appendTo(i)}},e)this._init();else if(b)switch(b){case"reload":this._load()}})),t(window).bind("hashchange.pagination",(function(e){n.each((function(){var e=t(this),a=e.attr("id"),n=e.data("tp");if(!a||!n)return!1;var s=t.bbq.getState(a)||"";if(""!=s&&-1!=s.indexOf(",")){var r=s.split(",",2);if(n.currentPage==r[0]&&n.numRowsPage==r[1])return;n.currentPage=parseInt(r[0]),n.numRowsPage=parseInt(r[1])}else{var i=e.data("tpdef");n.currentPage=i.currentPage||0,n.numRowsPage=i.numRowsPage||10}e.data("tp",t.extend({},n)),this._load()}))})),t(window).trigger("hashchange.pagination"),n}}(jQuery);