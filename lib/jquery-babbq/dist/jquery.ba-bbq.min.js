/*!
 * jQuery BBQ: Back Button & Query Library - v1.3pre - 8/26/2010
 * http://benalman.com/projects/jquery-bbq-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
!function(t,e){var n,r,a,o,i,c,u,f,s,l,h,p,g,d=Array.prototype.slice,m=decodeURIComponent,y=t.param,v=t.bbq=t.bbq||{},b=t.event.special,$="querystring",w="fragment",x="href",j="src",A=/^.*\?|#.*$/g,q={};function N(t){return"string"==typeof t}function C(t){var e=d.call(arguments,1);return function(){return t.apply(this,e.concat(d.call(arguments)))}}function U(e,a,i,c,u){var f,p,d,y,v;return c!==n?(v=(d=i.match(e?l:/^([^#?]*)\??([^#]*)(#?.*)/))[3]||"",2===u&&N(c)?p=c.replace(e?s:A,""):(y=o(d[2]),c=N(c)?o[e?w:$](c):c,p=2===u?c:1===u?t.extend({},c,y):t.extend({},y,c),p=r(p),e&&(p=p.replace(h,m))),f=d[1]+(e?g:p||!d[1]?"?":"")+p+v):f=a(i!==n?i:location.href),f}function S(t,e,r){return e===n||"boolean"==typeof e?(r=e,e=y[t?w:$]()):e=N(e)?e.replace(t?s:A,""):e,o(e,r)}function E(e,r,a,o){return N(a)||"object"==typeof a||(o=a,a=r,r=n),this.each((function(){var n=t(this),i=r||f()[(this.nodeName||"").toLowerCase()]||"",c=i&&n.attr(i)||"";n.attr(i,y[e](c,a,o))}))}y.querystring=C(U,0,(function(t){return t.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")})),y.fragment=a=C(U,1,(function(t){return t.replace(l,"$2")})),y.sorted=r=function(e,n){var r=[],a={};return t.each(y(e,n).split("&"),(function(t,e){var n=e.replace(/(?:%5B|=).*$/,""),o=a[n];o||(o=a[n]=[],r.push(n)),o.push(e)})),t.map(r.sort(),(function(t){return a[t]})).join("&")},a.noEscape=function(e){e=e||"";var n=t.map(e.split(""),encodeURIComponent);h=new RegExp(n.join("|"),"g")},a.noEscape(",/"),a.ajaxCrawlable=function(t){return t!==n&&(t?(s=/^.*(?:#!|#)/,l=/^([^#]*)(?:#!|#)?(.*)$/,g="#!"):(s=/^.*#/,l=/^([^#]*)#?(.*)$/,g="#"),p=!!t),p},a.ajaxCrawlable(0),t.deparam=o=function(e,r){var a={},o={true:!0,false:!1,null:null};return t.each(e.replace(/\+/g," ").split("&"),(function(e,i){var c,u=i.split("="),f=m(u[0]),s=a,l=0,h=f.split("]["),p=h.length-1;if(/\[/.test(h[0])&&/\]$/.test(h[p])?(h[p]=h[p].replace(/\]$/,""),p=(h=h.shift().split("[").concat(h)).length-1):p=0,2===u.length)if(c=m(u[1]),r&&(c=c&&!isNaN(c)?+c:"undefined"===c?n:o[c]!==n?o[c]:c),p)for(;l<=p;l++)s=s[f=""===h[l]?s.length:h[l]]=l<p?s[f]||(h[l+1]&&isNaN(h[l+1])?{}:[]):c;else t.isArray(a[f])?a[f].push(c):a[f]!==n?a[f]=[a[f],c]:a[f]=c;else f&&(a[f]=r?n:"")})),a},o.querystring=C(S,0),o.fragment=i=C(S,1),t.elemUrlAttr||(t.elemUrlAttr=function(e){return t.extend(q,e)})({a:x,base:x,iframe:j,img:j,input:j,form:"action",link:x,script:j}),f=t.elemUrlAttr,t.fn.querystring=C(E,$),t.fn.fragment=C(E,w),v.pushState=c=function(t,e){N(t)&&/^#/.test(t)&&e===n&&(e=2);var r=t!==n,o=a(location.href,r?t:{},r?e:2);location.href=o},v.getState=u=function(t,e){return t===n||"boolean"==typeof t?i(t):i(e)[t]},v.removeState=function(e){var r={};e!==n&&(r=u(),t.each(t.isArray(e)?e:arguments,(function(t,e){delete r[e]}))),c(r,2)},b.hashchange=t.extend(b.hashchange,{add:function(e){var r;function i(t){var e=t.fragment=a();t.getState=function(t,r){return t===n||"boolean"==typeof t?o(e,t):o(e,r)[t]},r.apply(this,arguments)}if(t.isFunction(e))return r=e,i;r=e.handler,e.handler=i}})}(jQuery),
/*!
 * jQuery hashchange event - v1.3 - 7/21/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
function(t,e,n){var r,a="hashchange",o=document,i=t.event.special,c=o.documentMode,u="onhashchange"in e&&(c===n||c>7);function f(t){return"#"+(t=t||location.href).replace(/^[^#]*#?(.*)$/,"$1")}t.fn.hashchange=function(t){return t?this.bind(a,t):this.trigger(a)},t.fn.hashchange.delay=50,i.hashchange=t.extend(i.hashchange,{setup:function(){if(u)return!1;t(r.start)},teardown:function(){if(u)return!1;t(r.stop)}}),r=function(){var r,i,c,s={},l=f(),h=function(t){return t},p=h,g=h;function d(){var n=f(),o=g(l);n!==l?(p(l=n,o),t(e).trigger(a)):o!==l&&(location.href=location.href.replace(/#.*/,"")+o),r=setTimeout(d,t.fn.hashchange.delay)}return s.start=function(){r||d()},s.stop=function(){r&&clearTimeout(r),r=n},t.hasOwnProperty("browser")&&t.browser.msie&&!u&&(s.start=function(){i||(c=(c=t.fn.hashchange.src)&&c+f(),i=t('<iframe tabindex="-1" title="empty"/>').hide().one("load",(function(){c||p(f()),d()})).attr("src",c||"javascript:0").insertAfter("body")[0].contentWindow,o.onpropertychange=function(){try{"title"===event.propertyName&&(i.document.title=o.title)}catch(t){}})},s.stop=h,g=function(){return f(i.location.href)},p=function(e,n){var r=i.document,a=t.fn.hashchange.domain;e!==n&&(r.title=o.title,r.open(),a&&r.write('<script>document.domain="'+a+'"<\/script>'),r.close(),i.location.hash=e)}),s}()}(jQuery,this);